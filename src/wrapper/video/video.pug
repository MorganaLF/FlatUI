include player/player

mixin video
    .video
        .video__title-container
            +subheading('VIDEO')
        +player



    //script.
    //
    //        // 2. This code loads the IFrame Player API code asynchronously.
    //        var tag = document.createElement('script');
    //
    //        tag.src = "https://www.youtube.com/iframe_api";
    //        var firstScriptTag = document.getElementsByTagName('script')[0];
    //        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    //
    //        // 3. This function creates an <iframe> (and YouTube player)
    //        //    after the API code downloads.
    //        var player;
    //        function onYouTubeIframeAPIReady() {
    //        player = new YT.Player(document.querySelector('.video__iframe'), {
    //            height: '360',
    //            width: '640',
    //            playerVars: { 'autoplay': 0, 'controls': 0, 'fs': 0, 'modestbranding': 1},
    //            videoId: 'rPmGtZAUxNs',
    //            events: {
    //            'onReady': onPlayerReady,
    //            'onStateChange': onPlayerStateChange
    //        }
    //        });
    //        }
    //
    //        // 4. The API will call this function when the video player is ready.
    //        function onPlayerReady(event) {
    //            event.target.playVideo();
    //
    //              updateProgressBar();
    //
    //              var time_update_interval = setInterval(function () {
    //                updateProgressBar();
    //              }, 1000);
    //        }
    //
    //        // 5. The API calls this function when the player's state changes.
    //        //    The function indicates that when playing a video (state=1),
    //        //    the player should play for six seconds and then stop.
    //        var done = false;
    //        var iStatus;
    //        function onPlayerStateChange(event) {
    //              if (event.data == YT.PlayerState.PAUSED) {
    //                iStatus = YT.PlayerState.PAUSED;
    //                document.querySelector('.video__play-button').classList.remove('video__play-button_playing');
    //              } else if (event.data == YT.PlayerState.PLAYING) {
    //                iStatus = YT.PlayerState.PLAYING;
    //                document.querySelector('.video__play-button').classList.add('video__play-button_playing');
    //              }
    //            if (event.data == YT.PlayerState.PLAYING && !done) {
    //                setTimeout(stopVideo, 6000);
    //                done = true;
    //            }
    //        }
    //        function stopVideo() {
    //            player.stopVideo();
    //        }
    //
    //        /* Развернуть на весь экран */
    //        let isFull = false;
    //        function playFullscreen (){
    //
    //          var doc = document.querySelector('.video');
    //
    //          if (!isFull) {
    //            document.querySelector('.video__full-button').classList.add('video__full-button_opened')
    //            if (doc.requestFullscreen) {
    //              doc.requestFullscreen();
    //            }
    //            else if (doc.mozRequestFullScreen) {
    //              doc.mozRequestFullScreen();
    //            }
    //            else if (doc.webkitRequestFullScreen) {
    //              doc.webkitRequestFullScreen();
    //            }
    //          } else {
    //            document.querySelector('.video__full-button').classList.remove('video__full-button_opened');
    //            if (document.exitFullscreen) {
    //              document.exitFullscreen();
    //            }
    //            else if (document.mozCancelFullScreen) {
    //              document.mozCancelFullScreen();
    //            }
    //            else if (document.webkitCancelFullScreen) {
    //              document.webkitCancelFullScreen();
    //            }
    //          }
    //
    //          isFull = !isFull;
    //        }
    //
    //        // Обновляем прогресс
    //        function updateProgressBar(){
    //            var line_width = document.querySelector('.video__progress').clientWidth;
    //            var persent = (player.getCurrentTime() / player.getDuration());
    //            document.querySelector('.video__progress--full').style.width = persent * line_width + 'px';
    //            //var per = persent * 100;
    //            //document.getElementById('fader').style.left = per+'%';
    //        }
    //
    //        /* Линия прогресса */
    //        function progress (event) {
    //
    //            var line_width = document.querySelector('.video__progress').clientWidth;
    //            // положение элемента
    //            //var pos = document.getElementById('line').offset();
    //            var elem_left = document.querySelector('.video__progress').getBoundingClientRect().left;
    //            // положение курсора внутри элемента
    //            var Xinner = event.pageX - elem_left;
    //            var newTime = player.getDuration() * (Xinner / line_width);
    //            // Skip video to new time.
    //            player.seekTo(newTime);
    //        }
    //
    //        /* Включить видео */
    //
    //        function playVideo(event) {
    //          var state = player.getPlayerState();
    //          if (iStatus == YT.PlayerState.PLAYING) {
    //            player.pauseVideo();
    //          } else if (iStatus == YT.PlayerState.PAUSED) {
    //            player.playVideo();
    //          }
    //        }
    //
    //        /* Добавление событий */
    //        document.querySelector('.video__play-button')
    //            .addEventListener('click', playVideo);
    //
    //        document.querySelector('.video__progress')
    //            .addEventListener('click', progress);
    //
    //        document.querySelector('.video__full-button')
    //            .addEventListener('click', playFullscreen);

